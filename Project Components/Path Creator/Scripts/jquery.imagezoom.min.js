(function(B){var A={init:function(E){var D=B.extend({},B.fn.imageZoom.defaults,E);return this.each(function(){var P=B(this);P.data("settings",D);P.data("originalStyles",P.attr("style"));P.data("hasImageZoom",true);P.wrap(B(D.wrapper).addClass(D.wrapperClass));var J=P.parents("."+D.wrapperClass);var I=P.outerWidth(),N=P.outerHeight(),L=1,G=1,M,H=null,R={x:0,y:0},F=["","-webkit-","-moz-","-o-","-ms-","-khtml-"];J.css({position:"relative",display:"block",overflow:"hidden",width:I,height:N,marginTop:P.css("marginTop"),marginBottom:P.css("marginBottom"),marginLeft:P.css("marginLeft"),marginRight:P.css("marginRight"),"float":P.css("float"),clear:P.css("clear")});P.css({position:"absolute",left:0,top:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0});var O=function(){J.hammer(D.hammerSettings);J.bind("transformstart",function(Y){if(Y&&Y.gesture){var V=Y.gesture.touches[0].screenX||0;var T=Y.gesture.touches[1].screenX||0;var X=Y.gesture.touches[0].screenY||0;var W=Y.gesture.touches[1].screenY||0;var U=((V+T)*0.5-M.left)/L;var S=((X+W)*0.5-M.top)/L;var Z=P.position();U-=Z.left/L;S-=Z.top/L;R.x=U;R.y=S}});J.bind("transform",function(S){if(S&&S.gesture){L=Math.max(D.minZoom,Math.min(G*S.gesture.scale,D.maxZoom));K()}});J.bind("transformend",function(S){G=L});J.bind("drag",function(S){if(S&&S.gesture){if(H){R.x+=(H.gesture.deltaX-S.gesture.deltaX)/L;R.y+=(H.gesture.deltaY-S.gesture.deltaY)/L;K()}H=S;if(L>1){S.gesture.srcEvent.preventDefault();S.gesture.srcEvent.stopPropagation()}}});J.bind("dragend",function(S){H=null})};var Q=function(){J.mousewheel(function(X,Z,U,T){var W=(X.clientX-M.left)/L;var V=(X.clientY-M.top)/L;var Y=P.position();W-=Y.left/L;V-=Y.top/L;R.x=W;R.y=V;L+=Z*D.scrollSensitivity;if(L<D.maxZoom&&L>D.minZoom){X.preventDefault();X.stopPropagation()}L=Math.max(D.minZoom,Math.min(L,D.maxZoom));J.css("cursor",L>1?"move":"auto");K()});if((typeof jQuery.fn.hammer!="function")||D.disableHammer){var S=function(T){if(H){R.x+=(H.clientX-T.clientX)/L;R.y+=(H.clientY-T.clientY)/L;K()}H=T;if(L>1){T.preventDefault();T.stopPropagation();return false}};J.mousedown(function(T){if(L>1){T.preventDefault();T.stopPropagation();B(document).bind("mousemove",S);return false}});B(document).mouseup(function(T){B(document).unbind("mousemove",S);H=null})}};B("."+D.wrapperClass+" "+P[0].tagName).each(function(){M=B(this).offset()});var K=function(){if(D.confine){L=Math.max(1,L);R.x=Math.min(I,Math.max(0,R.x));R.y=Math.min(N,Math.max(0,R.y))}var S={};B(F).each(function(T,U){S[U+"transform"]="scale("+L+")";S[U+"transform-origin"]=R.x+"px "+R.y+"px"});P.css(S)};if((typeof jQuery.fn.hammer=="function")&&!D.disableHammer){O()}if((typeof jQuery.fn.mousewheel=="function")){Q()}})},destroy:function(){return this.each(function(){var E=B(this);if(E.data("hasImageZoom")){var D=E.data(D)||B.fn.imageZoom.defaults;E.attr("style",E.data("originalStyles")||"");E.unwrap("."+D.wrapperClass);E.data("hasImageZoom",false)}})}};B.fn.imageZoom=function(D){if(A[D]){return A[D].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof D==="object"||!D){return A.init.apply(this,arguments)}else{B.error("Method "+D+" does not exist on jQuery.imageZoom")}}};function C(D,E){if(window.console&&window.console.log){window.console.log(D)}if(E){B(E).text(D)}}B.fn.imageZoom.defaults={wrapper:"<div></div>",wrapperClass:"zoomWrapper",minZoom:1,maxZoom:5,confine:true,scrollSensitivity:0.2,hammerSettings:{prevent_default:false,swipe:false,scale_treshold:0,drag_min_distance:0},disableHammer:false}})(jQuery);